# LOKIZ 기획서 대비 누락 기능 분석

**분석일:** 2025년 10월 29일  
**기준:** LOKIZ MVP 최종 통합 기획 문서  
**현재 구현:** 62개 API 엔드포인트

---

## 📊 분석 요약

| 카테고리 | 기획서 요구사항 | 구현 상태 | 누락 API 수 |
|---------|---------------|----------|------------|
| **스튜디오 기능** | 5개 핵심 기능 | 부분 구현 | 3개 |
| **소셜 기능** | 완전한 리믹스 생태계 | 부분 구현 | 2개 |
| **프로필 기능** | 리믹스 추적 | 부분 구현 | 2개 |
| **크레딧 시스템** | 일일 무료 지급 | 미구현 | 2개 |
| **피드 알고리즘** | For You / Following | 미구현 | 2개 |

**총 누락 API: 11개**

---

## 🔴 크리티컬 누락 기능 (즉시 구현 필요)

### 1. AI 자동 통합 (Sticker to Reality) ⚠️⚠️⚠️

**기획서 명세:**
> 영상에 다른 이미지를 AI가 자연스럽게 합성하여 '현실에 스티커가 붙은 듯한' 효과를 구현합니다.
> - **길이 제한**: 10초 (사용자가 60초 영상 중 10초 구간 선택)
> - **크레딧**: 40-50 크레딧
> - **모델**: `luma/modify-video`

**현재 상태:** ❌ 완전 미구현

**필요 API:**
```
POST /v1/ai/sticker-to-reality
Request:
{
  "base_video_id": "uuid",
  "sticker_image_url": "string",
  "start_time": 5.0,
  "end_time": 15.0,
  "intensity": 0.8
}

Response:
{
  "job_id": "uuid",
  "status": "processing",
  "estimated_time": 120
}
```

**영향:**
- 기획서의 **핵심 차별화 기능**
- Instagram 'Sticker to Reality' 트렌드 구현
- 크레딧 소모가 가장 큰 기능 (40-50 크레딧)
- **수익화의 핵심**

**우선순위:** 🔴 최고 (MVP의 핵심 가치 제안)

---

### 2. 리믹스 추적 시스템 ⚠️⚠️

**기획서 명세:**
> 게시 시, 원본 영상의 크리에이터가 자동으로 태그되고, 리믹스 관계가 표시됩니다. 
> (예: 'Remixed from @original_creator')

**현재 상태:** ⚠️ 부분 구현
- `videos.original_video_id` 필드 존재
- `videos.remix_count` 필드 존재
- **BUT**: 리믹스 관계를 조회하는 API 없음

**필요 API (2개):**

#### A. 리믹스 트리 조회
```
GET /v1/videos/{video_id}/remix-tree

Response:
{
  "original": {
    "id": "uuid",
    "user": {...},
    "created_at": "..."
  },
  "remixes": [
    {
      "id": "uuid",
      "user": {...},
      "created_at": "...",
      "remix_count": 5
    }
  ],
  "total_remixes": 10
}
```

#### B. 사용자의 리믹스한 영상 목록
```
GET /v1/users/{user_id}/remixed-videos

Response:
{
  "videos": [...],
  "has_more": true,
  "next_cursor": "..."
}
```

**영향:**
- 프로필 페이지의 **"내가 리믹스한 영상 모음"** 탭 구현 불가
- 리믹스 관계 시각화 불가
- **소셜 리믹스 문화의 핵심 기능**

**우선순위:** 🔴 최고 (MVP의 핵심 가치 제안)

---

### 3. 크레딧 일일 무료 지급 시스템 ⚠️

**기획서 명세:**
> **무료 제공**: 매일 자정, 모든 사용자에게 10 크레딧 무료 지급

**현재 상태:** ❌ 미구현

**필요 구현:**

#### A. 크레딧 일일 지급 API
```
POST /v1/credits/daily-claim

Response:
{
  "claimed": true,
  "amount": 10,
  "next_claim_at": "2025-10-30T00:00:00Z",
  "new_balance": 1010
}
```

#### B. 크레딧 지급 상태 확인 API
```
GET /v1/credits/daily-status

Response:
{
  "can_claim": false,
  "next_claim_at": "2025-10-30T00:00:00Z",
  "last_claimed_at": "2025-10-29T00:00:05Z"
}
```

**영향:**
- 무료 사용자 유지 전략의 핵심
- 일일 활성 사용자(DAU) 증가 유도
- 사용자 리텐션 향상

**우선순위:** 🔴 높음 (수익화 모델의 핵심)

---

## 🟡 중요 누락 기능 (단기 구현 권장)

### 4. 피드 알고리즘 (For You / Following) ⚠️

**기획서 명세:**
> - **For You**: 알고리즘 기반 추천 피드 (MVP에서는 시간순으로 시작)
> - **Following**: 내가 팔로우하는 사용자들의 피드

**현재 상태:** ⚠️ 부분 구현
- `GET /v1/videos/` 존재 (전체 피드만)
- Following 피드 없음
- For You 알고리즘 없음

**필요 API (2개):**

#### A. For You 피드
```
GET /v1/videos/for-you?page_size=20&cursor=...

Response:
{
  "videos": [...],
  "algorithm": "time_based",  // MVP: 시간순
  "has_more": true,
  "next_cursor": "..."
}
```

#### B. Following 피드
```
GET /v1/videos/following?page_size=20&cursor=...

Response:
{
  "videos": [...],  // 팔로우한 사용자의 영상만
  "has_more": true,
  "next_cursor": "..."
}
```

**영향:**
- 사용자 경험의 핵심
- 팔로우 기능의 실질적 가치 제공
- 콘텐츠 발견성 향상

**우선순위:** 🟡 중간 (사용자 경험 개선)

---

### 5. 프로필 페이지 - 리믹스 통계 ⚠️

**기획서 명세:**
> - 내 영상이 리믹스된 횟수 및 목록

**현재 상태:** ⚠️ 부분 구현
- `videos.remix_count` 필드 존재
- **BUT**: 리믹스된 영상 목록 조회 API 없음

**필요 API:**
```
GET /v1/users/{user_id}/remixes-received?page_size=20&cursor=...

Response:
{
  "videos": [
    {
      "id": "uuid",
      "user": {...},
      "original_video": {
        "id": "uuid",
        "title": "...",
        "user_id": "my_user_id"
      },
      "created_at": "..."
    }
  ],
  "total_remixes": 50,
  "has_more": true,
  "next_cursor": "..."
}
```

**영향:**
- 프로필 페이지의 **"내 영상이 리믹스된 목록"** 탭 구현 불가
- 크리에이터의 영향력 시각화 불가
- 리믹스 문화 촉진 제한

**우선순위:** 🟡 중간 (프로필 완성도)

---

### 6. 영상 게시 시 해시태그 자동 추출 ⚠️

**기획서 명세:**
> 캡션 작성 및 공유

**현재 상태:** ⚠️ 부분 구현
- `video_hashtags` 테이블 존재
- **BUT**: 캡션에서 해시태그 자동 추출 로직 없음

**필요 구현:**
- 영상 생성/수정 시 캡션에서 `#태그` 자동 추출
- `video_hashtags` 테이블에 자동 저장
- 해시태그별 영상 수 자동 업데이트

**영향:**
- 트렌딩 해시태그 기능 활성화
- 콘텐츠 발견성 향상
- 검색 기능 강화

**우선순위:** 🟡 중간 (소셜 기능 완성도)

---

## 🟢 선택적 기능 (장기 구현)

### 7. I2V 전용 엔드포인트

**기획서 명세:**
> **이미지 업로드 (I2V)**: 정지 이미지를 업로드하면 AI가 동적인 비디오로 변환합니다.
> - **생성 길이**: 5-10초
> - **크레딧**: 15 크레딧

**현재 상태:** ⚠️ 부분 구현
- `POST /v1/ai/template` 존재 (I2V 포함)
- **BUT**: 순수 I2V 전용 엔드포인트 없음

**필요 API:**
```
POST /v1/ai/image-to-video

Request:
{
  "image_url": "string",
  "duration": 10,
  "motion_intensity": 0.5
}

Response:
{
  "job_id": "uuid",
  "status": "processing",
  "estimated_time": 60
}
```

**영향:**
- 사용자 경험 개선 (명확한 기능 구분)
- 현재는 템플릿 API로 대체 가능

**우선순위:** 🟢 낮음 (현재 기능으로 대체 가능)

---

### 8. 영상 다운로드 API

**기획서 명세:**
> (명시되지 않았지만 일반적인 소셜 플랫폼 기능)

**현재 상태:** ❌ 미구현

**필요 API:**
```
GET /v1/videos/{video_id}/download

Response:
{
  "download_url": "https://...",
  "expires_at": "2025-10-29T12:00:00Z"
}
```

**영향:**
- 사용자 편의성
- 외부 공유 촉진

**우선순위:** 🟢 낮음 (선택적 기능)

---

### 9. 신고/차단 시스템

**기획서 명세:**
> (명시되지 않았지만 필수 안전 기능)

**현재 상태:** ❌ 미구현

**필요 API (4개):**
```
POST /v1/reports/videos/{video_id}
POST /v1/reports/users/{user_id}
POST /v1/blocks/users/{user_id}
GET  /v1/blocks/
```

**영향:**
- 커뮤니티 안전
- 앱스토어 심사 요구사항

**우선순위:** 🟢 중간 (안전 기능)

---

### 10. 관리자 대시보드 API

**기획서 명세:**
> (명시되지 않았지만 운영 필수)

**현재 상태:** ❌ 미구현

**필요 API:**
- 사용자 관리 (정지, 삭제)
- 콘텐츠 관리 (삭제, 숨김)
- 통계 조회 (DAU, 영상 수, 크레딧 판매)

**우선순위:** 🟢 낮음 (MVP 이후)

---

## 📊 구현 우선순위 로드맵

### 🔴 Phase 1: 즉시 구현 (MVP 완성)

**목표:** 기획서의 핵심 가치 제안 구현

1. **AI 자동 통합 (Sticker to Reality)** - 1주
   - MVP의 핵심 차별화 기능
   - 수익화의 핵심 (40-50 크레딧)

2. **리믹스 추적 시스템** - 3일
   - 리믹스 트리 조회 API
   - 사용자의 리믹스한 영상 목록 API

3. **크레딧 일일 무료 지급** - 2일
   - 일일 지급 API
   - 지급 상태 확인 API
   - Cron Job 설정

**예상 기간:** 2주

---

### 🟡 Phase 2: 단기 개선 (사용자 경험)

**목표:** 소셜 기능 완성도 향상

4. **피드 알고리즘** - 3일
   - For You 피드 (시간순)
   - Following 피드

5. **프로필 리믹스 통계** - 2일
   - 리믹스 받은 영상 목록 API

6. **해시태그 자동 추출** - 2일
   - 캡션 파싱 로직
   - 자동 저장

**예상 기간:** 1주

---

### 🟢 Phase 3: 장기 개선 (완성도)

**목표:** 플랫폼 안정성 및 운영 효율

7. **신고/차단 시스템** - 1주
8. **관리자 대시보드** - 2주
9. **I2V 전용 엔드포인트** - 2일
10. **영상 다운로드** - 1일

**예상 기간:** 1개월

---

## 🎯 최종 권장 사항

### 즉시 구현 필요 (MVP 완성)

**3개 기능, 예상 2주:**
1. ✅ AI 자동 통합 (Sticker to Reality)
2. ✅ 리믹스 추적 시스템
3. ✅ 크레딧 일일 무료 지급

**이 3개 기능이 구현되어야 기획서의 MVP가 완성됩니다.**

### 현재 구현 상태 평가

| 카테고리 | 완성도 | 평가 |
|---------|--------|------|
| **인증/사용자** | 95% | ✅ 우수 |
| **소셜 기능** | 90% | ✅ 우수 |
| **AI 기능** | 60% | ⚠️ 핵심 기능 누락 |
| **크레딧 시스템** | 80% | ⚠️ 일일 지급 누락 |
| **프로필** | 70% | ⚠️ 리믹스 추적 누락 |

**전체 완성도: 79%**

### 결론

**현재 백엔드는 기술적으로 우수하지만, 기획서의 핵심 가치 제안 중 일부가 누락되어 있습니다.**

특히:
- **AI 자동 통합 (Sticker to Reality)**: MVP의 핵심 차별화 기능
- **리믹스 추적 시스템**: 소셜 리믹스 문화의 핵심
- **크레딧 일일 지급**: 사용자 리텐션의 핵심

**이 3개 기능을 2주 내에 구현하면 MVP가 완성됩니다.**

---

**분석자:** Manus AI  
**분석 완료일:** 2025년 10월 29일

